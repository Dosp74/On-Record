{% extends 'base.html' %}
{% load static %}

{% block style %}
<link rel="stylesheet" href="{% static 'css/write_diaries.css' %}">
{% endblock %}

{% block content %}
    <div class="background-a"></div>
    <div class="write-container">
      <div class="write-header">
          <div class="today-diary">오늘의 일기</div>
          <div class="write-header-l">
              <h1 id="date"></h1>
              <button class="public-btn">전체공개</button>
          </div>
      </div>
      <div class="write-header-a">
          <form method="POST" action="{% url 'diaries:create_diaries' %}?day={{selected_date.day}}&month={{selected_date.month}}&year={{selected_date.year}}" enctype="multipart/form-data">
              {% csrf_token %}
            
              <div style="display: flex; gap: 20px; justify-content: center;">
                  <div class="form-group">
                      <label>제목</label>
                      {{ form.title }}
                  </div>
                  <div class="write-header-a-l">
                    <div class="form-group">
                        <label>날씨</label>
                        {{ form.weather }}
                    </div>
                    <div class="form-group">
                        <label>기분</label>
                        {{ form.mood }}
                    </div>
                    <div class="form-group">
                      <label>누구에게 쓰실 건가요?</label>
                      {{ form.friend }}
                  </div>
                  </div>
              </div>
      </div>
      <div class="diary-content">
          <div class="image-upload">
              <label for="id_image">이미지 업로드</label>
              {{ form.image }}
          </div>
          <div class="text-input">
              <label for="id_content">내용</label>
              {{ form.content }}
          </div>
      </div>
      <button type="submit" class="create-btn">완료</button>
    </div>
  </form>
  
        <script>
                function formatDate() {
                    const today = new Date();
                    
                    // 년, 월, 일 추출
                    const year = today.getFullYear();
                    const month = String(today.getMonth() + 1).padStart(2, '0'); // 0부터 시작하므로 +1
                    const day = String(today.getDate()).padStart(2, '0');
                    
                    // 요일 추출
                    const daysOfWeek = ['일요일', '월요일', '화요일', '수요일', '목요일', '금요일', '토요일'];
                    const dayOfWeek = daysOfWeek[today.getDay()];
                    
                    // 포맷팅된 날짜
                    const formattedDate = `${year}/${month}/${day} ${dayOfWeek}`;
                    return formattedDate;
                }

                window.onload = function() {
                    document.getElementById("date").textContent = formatDate();
                }
        </script>
{% endblock %}
