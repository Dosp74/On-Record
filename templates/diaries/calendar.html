<!-- 연·월 선택 드롭다운 -->
<select id="year-select">
    {% for y in year_range %}
        <option value="{{ y }}" {% if y == year %}selected{% endif %}>{{ y }}</option>
    {% endfor %}
</select>
<select id="month-select">
    {% for m in month_range %}
        <option value="{{ m }}" {% if m == month %}selected{% endif %}>{{ m }}</option>
    {% endfor %}
</select>

<!-- 캘린더 UI -->
<table>
    <tr>
        <th>일</th><th>월</th><th>화</th><th>수</th><th>목</th><th>금</th><th>토</th>
    </tr>
    <tr>
        {% for day in days %}
            {% if day == 1 %}
                <td colspan="{{ first_day }}"></td>  {# 1일 시작 요일 맞추기 #}
            {% endif %}
            <td class="{% if day == today.day and month == today.month and year == today.year %}today{% endif %}">
                <a href="{% url 'diaries:diary_view' year=year month=month day=day %}">
                    {{ day }}
                </a>
                {% if day in diary_map %} 📝 {% endif %} {# 해당 날짜에 일기 있음 표시 #}
            </td>
            {% if day|add:first_day|divisibleby:7 %}
                </tr><tr> {% comment %} 한 줄 끝나면 줄바꿈 {% endcomment %}
            {% endif %}
        {% endfor %}
    </tr>
</table>

<!-- 오늘 날짜 스타일 -->
<style>
.today { background-color: yellow; font-weight: bold; }
</style>

<!-- 연·월 변경 시 GET 요청 -->
<script>
document.getElementById("year-select").addEventListener("change", function() {
    var year = this.value;
    var month = document.getElementById("month-select").value;
    window.location.href = `/calendar/${year}/${month}/`;
});
document.getElementById("month-select").addEventListener("change", function() {
    var year = document.getElementById("year-select").value;
    var month = this.value;
    window.location.href = `/calendar/${year}/${month}/`;
});
</script>